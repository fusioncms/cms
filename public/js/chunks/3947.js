(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[3947],{3947:(a,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,getSingle:()=>i});function i(a,t){axios.get("/api/singles/"+a).then((function(a){var s={},i={};_.has(a,"data.data.single")?(i=a.data.data.matrix,s=a.data.data.single):(i=a.data.data,s={name:i.name,slug:i.slug,publish_at:null,expire_at:null,status:1});var l={name:s.name,slug:s.slug,publish_at:s.publish_at,expire_at:s.expire_at,status:s.status};_.forEach(i.blueprint.sections,(function(a){_.forEach(a.fields,(function(a){l[a.handle]=s[a.handle]}))})),t(null,s,i,l)})).catch((function(a){t(new Error("The requested entry could not be found"))}))}const l={head:{title:function(){return{inner:_.has(this.single,"name")?this.single.name:"Loading..."}}},data:function(){return{single:{},entry:{},insight:[],sessionDuration:null,bounceRate:null,totalVisitors:null,totalPageViews:null}},methods:{secondsToString:function(a){var t="",s=_.floor((a%=86400)/3600),i=_.floor((a%=3600)/60);return s&&(t+=s+"h "),i&&(t+=i+"m "),(a=_.floor(a%60))&&(t+=a+"s"),""==t&&(t=a+"s"),t}},mounted:function(){axios.all([axios.get("/api/singles/"+this.single.slug+"/insight")]).then(axios.spread(function(a){this.insight=a.data.data,this.sessionDuration=this.secondsToString(a.data.data.averageSessionDuration),this.bounceRate=_.floor(a.data.data.bounceRate,2)+"%",this.totalVisitors=Number(a.data.data.totalVisitors).toLocaleString(),this.totalPageViews=Number(a.data.data.totalPageViews).toLocaleString()}.bind(this)))},beforeRouteEnter:function(a,t,s){i(a.params.single,(function(a,t,i,l){s((function(a){a.single=i,a.entry=t,a.$emit("updateHead")}))}))},beforeRouteUpdate:function(a,t,s){var l=this;i(a.params.single,(function(a,t,s,i){l.single=s,l.entry=t,l.$emit("updateHead")})),s()}};const n=(0,s(1900).Z)(l,(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"single-page"},[s("portal",{attrs:{to:"title"}},[s("page-title",{attrs:{icon:a.single.icon||"pencil-alt",subtitle:a.single.description}},[a._v(a._s(a.single.reference_singular))])],1),a._v(" "),s("portal",{attrs:{to:"actions"}},[s("div",{staticClass:"buttons"},["sm"!=a.$mq?s("ui-button",{attrs:{to:{name:"dashboard"},variant:"secondary"}},[a._v("Go Back")]):a._e(),a._v(" "),a.single.slug?s("ui-button",{attrs:{to:{name:"single.edit",params:{single:a.single.slug}},variant:"primary"}},[a._v("Edit")]):a._e()],1)]),a._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col w-full sm:w-1/2 xl:w-1/3 xxl:w-1/4"},[s("ui-card",[s("ui-card-body",[s("div",{staticClass:"analytics"},[s("div",{staticClass:"analytics__stat"},[s("div",{staticClass:"analytics__stat-label"},[s("h3",[a._v("Total Page Views")])]),a._v(" "),s("span",{staticClass:"analytics__stat-value",attrs:{"aria-labelledby":"analytic-visitors"}},[a._v(a._s(a.totalPageViews))])])])])],1)],1),a._v(" "),s("div",{staticClass:"col w-full sm:w-1/2 xl:w-1/3 xxl:w-1/4"},[s("ui-card",[s("ui-card-body",[s("div",{staticClass:"analytics"},[s("div",{staticClass:"analytics__stat"},[s("div",{staticClass:"analytics__stat-label"},[s("h3",[a._v("Total Visitors")])]),a._v(" "),s("span",{staticClass:"analytics__stat-value",attrs:{"aria-labelledby":"analytic-visitors"}},[a._v(a._s(a.totalVisitors))])])])])],1)],1),a._v(" "),s("div",{staticClass:"col w-full sm:w-1/2 xl:w-1/3 xxl:w-1/4"},[s("ui-card",[s("ui-card-body",[s("div",{staticClass:"analytics"},[s("div",{staticClass:"analytics__stat"},[s("div",{staticClass:"analytics__stat-label"},[s("h3",[a._v("Bounce Rate")])]),a._v(" "),s("span",{staticClass:"analytics__stat-value",attrs:{"aria-labelledby":"analytic-visitors"}},[a._v(a._s(a.bounceRate))])])])])],1)],1),a._v(" "),s("div",{staticClass:"col w-full sm:w-1/2 xl:w-1/3 xxl:w-1/4"},[s("ui-card",[s("ui-card-body",[s("div",{staticClass:"analytics"},[s("div",{staticClass:"analytics__stat"},[s("div",{staticClass:"analytics__stat-label"},[s("h3",[a._v("Average Session")])]),a._v(" "),s("span",{staticClass:"analytics__stat-value",attrs:{"aria-labelledby":"analytic-visitors"}},[a._v(a._s(a.sessionDuration))])])])])],1)],1)]),a._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col w-full"},[s("ui-card",[s("ui-card-body",[a._v("\n                    Associated collection datatable\n                ")])],1)],1)])],1)}),[],!1,null,null,null).exports}}]);