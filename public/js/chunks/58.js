(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{n7tU:function(e,t,a){"use strict";t.a={props:{field:{type:Object,required:!0},value:{required:!1,default:null},errors:{type:Object,required:!1,default:function(){}}},computed:{hasError:function(){return this.errors&&this.errors.has(this.field.handle)},errorMessage:function(){return this.errors?this.errors.get(this.field.handle):""}}}},oxcM:function(e,t,a){"use strict";a.r(t);var i={name:"address-fieldtype",mixins:[a("n7tU").a],data:function(){return{map:null,marker:null,mapError:"",help:'<p>A <a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">Google Maps API key</a> is required in order to view the map component and retrieve latitude and longitude coordinates for your address.</p><p>Once you have obtained one, please visit the <router-link to="/settings/google_maps">Google Maps settings page</router-link> to enter your API key.</p>'}},computed:{model:{get:function(){return this.value||{}},set:function(e){this.$emit("input",e)}},apiKey:function(){return this.setting("maps_api_key")},hasAPIKey:function(){return this.apiKey&&""!=this.apiKey},hasGMaps:function(){return!_.isUndefined(window.google)},mapID:function(){return this.field.handle+"_map"}},watch:{model:{deep:!0,handler:function(e){this.locateAddress()}},apiKey:function(e){var t=this;this.$nextTick((function(){t.initializeMap()}))}},methods:{initializeMap:function(){var e=this;if(_.isUndefined(window.google)){var t=document.createElement("script");window.mapInit=function(){return e.createMap()},t.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=".concat(this.apiKey,"&callback=mapInit")),document.head.appendChild(t)}else this.createMap()},createMap:function(){this.map=new google.maps.Map(document.getElementById(this.mapID)),this.locateAddress()},locateAddress:_.debounce((function(){var e=this;if(!_.isUndefined(window.google)){google.maps.event.trigger(this.map,"resize");var t=new google.maps.Geocoder,a=_.trim(Object.values(this.model).join(" "));if(!a)return null!==this.marker&&this.marker.setMap(null),this.map.setCenter(new google.maps.LatLng(0,0)),this.map.setZoom(1),this.model.formatted_address="",this.model.lat="",void(this.model.lng="");t.geocode({address:a},(function(t,i){i===google.maps.GeocoderStatus.OK&&(e.map.setCenter(t[0].geometry.location),e.map.setZoom(16),e.model.formatted_address=t[0].formatted_address,e.model.lat=t[0].geometry.location.lat(),e.model.lng=t[0].geometry.location.lng(),a&&(null!==e.marker&&e.marker.setMap(null),e.marker=new google.maps.Marker({map:e.map,position:t[0].geometry.location})))}))}}),1500)},created:function(){_.isEmpty(this.value)&&(this.model={address1:"",address2:"",city:"",state:"",zip:"",country:"",lat:"",lng:"",formatted_address:""})}},s=a("KHd+"),o=Object(s.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-fieldset",{attrs:{label:e.field.name,help:e.field.help}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col md:w-1/2"},[a("ui-input-group",{attrs:{name:e.field.handle+"_address1",required:e.field.required,label:"Address 1",placeholder:"Address 1","hide-label":""},model:{value:e.model.address1,callback:function(t){e.$set(e.model,"address1",t)},expression:"model.address1"}})],1),e._v(" "),a("div",{staticClass:"col md:w-1/2"},[a("ui-input-group",{attrs:{label:"Address 2","hide-label":"",name:e.field.handle+"_address2",placeholder:"Address 2"},model:{value:e.model.address2,callback:function(t){e.$set(e.model,"address2",t)},expression:"model.address2"}})],1),e._v(" "),a("div",{staticClass:"col md:w-1/3"},[a("ui-input-group",{attrs:{name:e.field.handle+"_city",required:e.field.required,label:"City",placeholder:"City","hide-label":""},model:{value:e.model.city,callback:function(t){e.$set(e.model,"city",t)},expression:"model.city"}})],1),e._v(" "),a("div",{staticClass:"col md:w-1/3"},[a("ui-input-group",{attrs:{name:e.field.handle+"_state",required:e.field.required,label:"State",placeholder:"State","hide-label":""},model:{value:e.model.state,callback:function(t){e.$set(e.model,"state",t)},expression:"model.state"}})],1),e._v(" "),a("div",{staticClass:"col md:w-1/3"},[a("ui-input-group",{attrs:{name:e.field.handle+"_zip",required:e.field.required,label:"Zip Code",placeholder:"Zip Code","hide-label":""},model:{value:e.model.zip,callback:function(t){e.$set(e.model,"zip",t)},expression:"model.zip"}})],1),e._v(" "),a("div",{staticClass:"col"},[a("ui-input-group",{attrs:{label:"Country","hide-label":"",name:e.field.handle+"_country",placeholder:"Country"},model:{value:e.model.country,callback:function(t){e.$set(e.model,"country",t)},expression:"model.country"}})],1)]),e._v(" "),a("div",{staticClass:"h-full rounded",attrs:{id:e.mapID}},[e.mapError?a("div",{staticClass:"bg-gray-100 rounded shadow p-3",domProps:{innerHTML:e._s(e.mapError)}}):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.hasAPIKey,expression:"hasAPIKey == false"}],staticClass:"help"},[a("p",[e._v("A "),a("a",{attrs:{href:"https://developers.google.com/maps/documentation/javascript/get-api-key",target:"_blank"}},[e._v("Google Maps API key")]),e._v(" is required in order to view the map component and retrieve latitude and longitude coordinates for your address. \n            Once you've obtained one, please visit the "),a("router-link",{attrs:{to:"/settings/google_maps"}},[e._v("Google Maps settings page")]),e._v(" to enter your API key.")],1)])])}),[],!1,null,null,null);t.default=o.exports}}]);