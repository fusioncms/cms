(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{"1m+V":function(t,e,s){"use strict";s.r(e);var o={head:{title:function(){return{inner:"Customize"}}},data:function(){return{theme:{},preview:"",url:"",hasChanges:!1,window:"desktop",showControls:!0}},computed:{hash:function(){return this.encode(JSON.stringify(this.theme.option))},previewUrl:function(){return this.baseUrl+this.url+"?preview="+this.hash},baseUrl:function(){return"/"},isDesktop:function(){return"desktop"==this.window},isTablet:function(){return"tablet"==this.window},isMobile:function(){return"mobile"==this.window}},watch:{"theme.option":{handler:_.debounce((function(){this.hasChanges=!0,this.reload()}),500),deep:!0},url:{handler:_.debounce((function(){this.reload()}),500)}},methods:{submit:function(){this.theme.option._method="PATCH",axios.post("/api/themes/".concat(this.theme.namespace),this.theme.option).then((function(){toast("Theme options have been updated","success")})).catch((function(t){toast(t.response.data.message,"failed")}))},encode:function(t){return encodeURIComponent(t).replace(/[!'()*]/g,escape)},reload:function(){this.preview=this.previewUrl},setWindow:function(t){this.window=t},toggleControls:function(){this.showControls=!this.showControls,this.$nextTick((function(){this.showControls?this.$refs["hide-controls"].focus():this.$refs["show-controls"].focus()}))}},beforeRouteEnter:function(t,e,s){axios.all([axios.get("/api/theme")]).then(axios.spread((function(t){s((function(e){e.theme=t.data.data}))})))}},i=s("KHd+"),n=Object(i.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preview"},[s("div",{staticClass:"preview__controls",class:{"w-0 border-0":!t.showControls},attrs:{"aria-hidden":!t.showControls}},[s("button",{ref:"show-controls",staticClass:"simple-button show-controls-button",class:{hidden:t.showControls,"inline-block":!t.showControls},on:{click:t.toggleControls}},[s("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","caret-square-right"]}}),t._v(" Show Controls")],1),t._v(" "),s("div",{staticClass:"controls",class:{hidden:!t.showControls}},[s("div",{staticClass:"controls__header"},[s("router-link",{staticClass:"flex items-center px-3 py-2 border-r border-gray-300 leading-none",attrs:{exact:"",to:{name:"dashboard"}}},[s("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","times"]}})],1),t._v(" "),s("div",{staticClass:"px-3 py-3"},[s("button",{staticClass:"button button--primary button--small",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("Save")])])],1),t._v(" "),s("div",{staticClass:"controls__content"},[s("p-accordion",{attrs:{multiple:!0}},t._l(t.theme.options,(function(e,o){return s("p-accordion-item",{key:e.handle,attrs:{title:e.name}},[s("div",{staticClass:"p-3"},[e.description?s("p",{staticClass:"text-sm"},[t._v(t._s(e.description))]):t._e(),t._v(" "),t._l(e.fields,(function(e,i){return s(e.fieldtype+"-fieldtype",{key:i,tag:"component",staticClass:"mb-8",attrs:{field:{name:e.name,handle:o,help:e.help,settings:e.settings||{}}},model:{value:t.theme.option[o][i],callback:function(e){t.$set(t.theme.option[o],i,e)},expression:"theme.option[handle][fieldHandle]"}})}))],2)])})),1)],1),t._v(" "),s("div",{staticClass:"controls__footer"},[s("button",{ref:"hide-controls",staticClass:"simple-button hide-controls-button",on:{click:t.toggleControls}},[s("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","caret-square-left"]}}),t._v(" Hide Controls")],1),t._v(" "),s("div",{staticClass:"flex border-l border-gray-300"},[s("button",{staticClass:"simple-button relative inline-flex items-center px-3 py-2 border-b-4 border-gray-300 hover:border-gray-500",class:{"hover:border-primary-500 border-primary-500":t.isDesktop},on:{click:function(e){return t.setWindow("desktop")}}},[s("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","desktop"]}})],1),t._v(" "),s("button",{staticClass:"simple-button relative inline-flex items-center px-3 py-2 border-b-4 border-gray-300 hover:border-gray-500",class:{"hover:border-primary-500 border-primary-500":t.isTablet},on:{click:function(e){return t.setWindow("tablet")}}},[s("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","tablet-alt"]}})],1),t._v(" "),s("button",{staticClass:"simple-button relative inline-flex items-center px-3 py-2 border-b-4 border-gray-300 hover:border-gray-500",class:{"hover:border-primary-500 border-primary-500":t.isMobile},on:{click:function(e){return t.setWindow("mobile")}}},[s("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","mobile-alt"]}})],1)])])])]),t._v(" "),s("div",{staticClass:"preview__window"},[t.preview?s("div",{staticClass:"window",class:"window--"+t.window},[s("p-frame",{attrs:{src:t.preview}})],1):s("div",{staticClass:"bg-white py-1 px-3 rounded-lg bg-gray-800 text-white uppercase font-bold text-sm tracking-wide"},[t._v("Loading...")])])])}),[],!1,null,null,null);e.default=n.exports}}]);