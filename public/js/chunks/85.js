(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{"1m+V":function(t,e,o){"use strict";o.r(e);var s,n=o("LvDl"),i=o.n(n),a=axios.CancelToken,r={head:{title:function(){return{inner:"Customize"}}},data:function(){return{theme:{},hasChanges:!1,window:"desktop",showControls:!0}},computed:{isDesktop:function(){return"desktop"==this.window},isTablet:function(){return"tablet"==this.window},isMobile:function(){return"mobile"==this.window}},watch:{"theme.option":{handler:function(){this.hasChanges=!0,this.update()},deep:!0}},methods:{update:i.a.debounce((function(){var t=this;null!=s&&s(),axios({method:"post",url:"/customize",data:this.theme.option,cancelToken:new a((function(t){s=t}))}).then((function(e){t.updateIframe(e.data)})).catch((function(t){if(!axios.isCancel(t))throw t}))}),150),updateIframe:function(t){var e=this.$refs.iframe;e.contentWindow.document.open(),e.contentWindow.document.write(t),e.contentWindow.document.close()},submit:function(){this.theme.option._method="PATCH",axios.post("/api/themes/".concat(this.theme.namespace),this.theme.option).then((function(){toast("Theme options have been updated","success")})).catch((function(t){toast(t.response.data.message,"failed")}))},setWindow:function(t){this.window=t},toggleControls:function(){this.showControls=!this.showControls,this.$nextTick((function(){this.showControls?this.$refs["hide-controls"].focus():this.$refs["show-controls"].focus()}))}},beforeRouteEnter:function(t,e,o){axios.all([axios.get("/api/theme")]).then(axios.spread((function(t){o((function(e){e.theme=t.data.data}))})))}},c=o("KHd+"),l=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"preview"},[o("div",{staticClass:"preview__controls",class:{"w-0 border-0":!t.showControls},attrs:{"aria-hidden":!t.showControls}},[o("button",{ref:"show-controls",staticClass:"simple-button show-controls-button",class:{hidden:t.showControls,"inline-block":!t.showControls},on:{click:t.toggleControls}},[o("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","caret-square-right"]}}),t._v(" Show Controls")],1),t._v(" "),o("div",{staticClass:"controls",class:{hidden:!t.showControls}},[o("div",{staticClass:"controls__header"},[o("router-link",{staticClass:"flex items-center px-3 py-2 border-r border-gray-300 leading-none",attrs:{exact:"",to:{name:"dashboard"}}},[o("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","times"]}})],1),t._v(" "),o("div",{staticClass:"px-3 py-3"},[o("button",{staticClass:"button button--primary button--small",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("Save")])])],1),t._v(" "),o("div",{staticClass:"controls__content"},[o("p-accordion",{attrs:{multiple:!0}},t._l(t.theme.options,(function(e,s){return o("p-accordion-item",{key:e.handle,attrs:{title:e.name}},[o("div",{staticClass:"p-3"},[e.description?o("p",{staticClass:"text-sm"},[t._v(t._s(e.description))]):t._e(),t._v(" "),t._l(e.fields,(function(e,n){return o(e.fieldtype+"-fieldtype",{key:n,tag:"component",staticClass:"mb-8",attrs:{field:{name:e.name,handle:s,help:e.help,settings:e.settings||{}}},model:{value:t.theme.option[s][n],callback:function(e){t.$set(t.theme.option[s],n,e)},expression:"theme.option[handle][fieldHandle]"}})}))],2)])})),1)],1),t._v(" "),o("div",{staticClass:"controls__footer"},[o("button",{ref:"hide-controls",staticClass:"simple-button hide-controls-button",on:{click:t.toggleControls}},[o("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","caret-square-left"]}}),t._v(" Hide Controls")],1),t._v(" "),o("div",{staticClass:"flex border-l border-gray-300"},[o("button",{staticClass:"simple-button relative inline-flex items-center px-3 py-2 border-b-4 border-gray-300 hover:border-gray-500",class:{"hover:border-primary-500 border-primary-500":t.isDesktop},on:{click:function(e){return t.setWindow("desktop")}}},[o("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","desktop"]}})],1),t._v(" "),o("button",{staticClass:"simple-button relative inline-flex items-center px-3 py-2 border-b-4 border-gray-300 hover:border-gray-500",class:{"hover:border-primary-500 border-primary-500":t.isTablet},on:{click:function(e){return t.setWindow("tablet")}}},[o("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","tablet-alt"]}})],1),t._v(" "),o("button",{staticClass:"simple-button relative inline-flex items-center px-3 py-2 border-b-4 border-gray-300 hover:border-gray-500",class:{"hover:border-primary-500 border-primary-500":t.isMobile},on:{click:function(e){return t.setWindow("mobile")}}},[o("fa-icon",{staticClass:"fa-fw",attrs:{icon:["fas","mobile-alt"]}})],1)])])])]),t._v(" "),o("div",{staticClass:"preview__window"},[o("div",{staticClass:"window",class:"window--"+t.window},[o("iframe",{ref:"iframe",attrs:{frameborder:"0"}})])])])}),[],!1,null,null,null);e.default=l.exports}}]);