(self.webpackChunkfusioncms=self.webpackChunkfusioncms||[]).push([[8812],{8812:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6900);const s={name:"replicator-fieldtype",data:function(){return{replicants:_.defaultTo(this.value,[]),sections:[],active:0}},props:{field:{type:Object,required:!0},value:{type:Array,required:!1,default:function(){return[]}},errors:{type:Object,required:!1,default:function(){}}},watch:{replicants:function(e){this.$emit("input",e)}},methods:{fieldErrors:function(e){var t=_.has(this.errors,"errors")?this.errors.errors:{};return t=_.pickBy(t,(function(t,n){return _.startsWith(n,e)})),t=_.mapKeys(t,(function(t,n){return _.replace(n,e,"")})),new r.Z(t)},_errorMessage:function(e){return this.errors?this.errors.get(e):""},fields:function(e){var t=_.findIndex(this.sections,(function(t){return t.id==e.id}));return-1!=t?this.sections[t].fields:[]},add:function(e){var t=this.sections[e],n={};_.each(t.fields,(function(e){return n[e.handle]=e.default})),this.replicants.push({section:t,fields:n})},move:function(e,t){this.replicants.splice(t,0,this.replicants.splice(e,1)[0])},remove:function(e){this.replicants.length>0&&this.replicants.splice(e,1)}},created:function(){var e=this;axios.get("/api/replicators/".concat(this.field.settings.replicator)).then((function(t){return e.sections=t.data.data.sections}))}};const i=(0,n(1900).Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"form__label",attrs:{for:e.field.handle},domProps:{innerHTML:e._s(e.field.name)}}),e._v(" "),e._l(e.sections,(function(t,r){return n("ui-button",{key:t.handle,staticClass:"mr-2",attrs:{variant:"secondary"},on:{click:function(t){return e.add(r)}}},[e._v("\n        "+e._s(t.name)+"\n        "),n("fa-icon",{staticClass:"fa-xs",attrs:{icon:"plus"}})],1)})),e._v(" "),n("ui-tabs",{attrs:{move:e.move}},e._l(e.replicants,(function(t,r){return n("ui-tab",{key:"replicant-"+r+"-tab",attrs:{name:"["+(r+1)+"] "+t.section.name,remove:e.remove}},e._l(e.fields(t.section),(function(s){return n(s.type.id+"-fieldtype",{key:s.handle,tag:"component",staticClass:"form__group",attrs:{field:s,errors:e.fieldErrors(e.field.handle+"."+r+".fields.")},model:{value:t.fields[s.handle],callback:function(n){e.$set(t.fields,s.handle,n)},expression:"replicant.fields[sub.handle]"}})})),1)})),1)],2)}),[],!1,null,null,null).exports}}]);