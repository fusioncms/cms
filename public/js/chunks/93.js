(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{D1a7:function(a,t,e){"use strict";e.r(t);var n=e("LvDl"),r=e.n(n),o=e("nUVr"),s={head:{title:function(){return{inner:this.form.name||"Loading..."}}},data:function(){return{id:null,ready:!1,placeholders:{},form:new o.a({name:"",handle:"",markdown:"",status:"1"},!0)}},methods:{isArray:function(a){return r.a.isArray(a)},addPlaceholder:function(a,t){var e=this.$refs.markdown.codemirror.getDoc();e.getCursor();t?e.replaceSelection("{{ $".concat(t,"->").concat(a," }}"),e.getSelection()):e.replaceSelection("{{ $".concat(a," }}"),e.getSelection())},updateMarkdown:function(a){this.form.markdown=a},submit:function(){var a=this;this.form.patch("/api/mailables/"+this.id).then((function(t){toast("Mailable successfully updated","success"),a.$router.push("/mailables")})).catch((function(a){toast(a.response.data.message,"failed")}))},placeholderOptions:function(a){var t=[];return r.a.each(a,(function(a){t.push({label:a,value:a})})),t}},beforeRouteEnter:function(a,t,e){axios.all([axios.get("/api/mailables/".concat(a.params.mailable))]).then(axios.spread((function(a){e((function(t){t.id=a.data.data.id,t.placeholders=a.data.data.placeholders,t.ready=!0,t.form.name=a.data.data.name,t.form.handle=a.data.data.handle,t.form.markdown=a.data.data.markdown,t.$emit("updateHead")}))}))).catch((function(a){e("/mailables"),toast("The requested mailable could not be found","warning")}))}},l=e("KHd+"),i=Object(l.a)(s,(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("form-container",{scopedSlots:a._u([{key:"sidebar",fn:function(){return[e("div",{staticClass:"card"},[e("div",{staticClass:"card__body"},[e("ui-slug",{attrs:{name:"handle",label:"Handle",monospaced:"",autocomplete:"off",required:"",delimiter:"_",watch:a.form.name,"has-error":a.form.errors.has("handle"),"error-message":a.form.errors.get("handle")},model:{value:a.form.handle,callback:function(t){a.$set(a.form,"handle",t)},expression:"form.handle"}}),a._v(" "),e("ui-toggle",{attrs:{name:"status",label:"Status","true-value":1,"false-value":0},model:{value:a.form.status,callback:function(t){a.$set(a.form,"status",t)},expression:"form.status"}})],1)]),a._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card__body"},[e("p",{staticClass:"text-sm"},[a._v("Below you will find a variety of values you may reference within your template.")]),a._v(" "),a._l(a.placeholders,(function(t,n){return e("div",{key:n},[a.isArray(t)?a._e():e("ui-button",{staticClass:"w-full mb-3 text-xs font-mono",on:{click:function(e){return a.addPlaceholder(t)}}},[a._v("$"+a._s(t))]),a._v(" "),e("ui-dropdown",{attrs:{id:"values"},scopedSlots:a._u([{key:"menu",fn:function(){return a._l(t,(function(t,r){return e("ui-dropdown-link",{key:r,staticClass:"text-xs",on:{click:function(e){return a.addPlaceholder(t,n)}}},[a._v("\n                                    "+a._s(t)+"\n                            ")])}))},proxy:!0}],null,!0)},[a._v("\n                        $"+a._s(n)+"\n\n                        ")])],1)}))],2)])]},proxy:!0}])},[e("portal",{attrs:{to:"title"}},[e("page-title",{attrs:{icon:"mail-bulk"}},[a._v("Edit Mailable")])],1),a._v(" "),e("portal",{attrs:{to:"actions"}},[e("div",{staticClass:"buttons"},[e("router-link",{staticClass:"button",attrs:{to:{name:"mailables"}}},[a._v("Go Back")]),a._v(" "),e("button",{staticClass:"button button--primary",class:{"button--disabled":!a.form.hasChanges},attrs:{type:"submit",disabled:!a.form.hasChanges},on:{click:function(t){return t.preventDefault(),a.submit(t)}}},[a._v("Save")])],1)]),a._v(" "),e("div",{staticClass:"card"},[e("div",{staticClass:"card__body"},[e("ui-title",{attrs:{name:"name",autocomplete:"off",autofocus:"",required:"","has-error":a.form.errors.has("name"),"error-message":a.form.errors.get("name")},model:{value:a.form.name,callback:function(t){a.$set(a.form,"name",t)},expression:"form.name"}}),a._v(" "),a.ready?e("markdown-fieldtype",{ref:"markdown",attrs:{field:{name:"Content",handle:"markdown"},value:a.form.markdown},on:{input:a.updateMarkdown}}):a._e()],1)])],1)}),[],!1,null,null,null);t.default=i.exports}}]);