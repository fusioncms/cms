<template>
    <transition
        name="animated-fade-in-out"
        enter-active-class="animated fadeIn faster"
        leave-active-class="animated fadeOut faster">

        <div v-show="shouldShow">
            <slot></slot>
        </div>

    </transition>
</template>

<script>
    export default {
        name: 'ui-collapse',

        data() {
            return {
                shouldShow: this.show,
            }
        },

        props: {
            name: {
                required: true,
                type: String,
            },

            show: {
                required: false,
                type: Boolean,
                default: false,
            },
        },

        methods: {
            toggle() {
                this.shouldShow = ! this.shouldShow
            },

            listenForDirective() {
                bus().$on('toggle-collapse-' + this.name, () => {
                    this.toggle()
                })
            },
        },

        created() {
            this.listenForDirective()
        },
    }
</script>
